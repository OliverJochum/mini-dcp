FROM eclipse-temurin:21-jdk AS builder
WORKDIR /workspace
COPY . .
RUN ./gradlew build

# get base image (jdk you're using)
FROM docker.io/library/eclipse-temurin:21.0.3_9-jdk-alpine

# copy jar file into the image
COPY build/libs/flightsearch_app.jar /flightsearch_app.jar

# set the executable that starts when the container boots
ENTRYPOINT [ "java", "-jar", "/flightsearch_app.jar" ]

# expose ports 5100 and 9100
# 5100 is for the application, 9100 is for the actuator
EXPOSE 5100 9100